Version 4
SHEET 1 2228 784
WIRE 16 64 -80 64
WIRE 96 64 16 64
WIRE 224 64 192 64
WIRE 304 64 224 64
WIRE 352 64 304 64
WIRE 464 64 432 64
WIRE 608 64 464 64
WIRE 976 64 608 64
WIRE -80 96 -80 64
WIRE 16 96 16 64
WIRE 464 96 464 64
WIRE 608 96 608 64
WIRE 304 144 304 64
WIRE 976 176 976 144
WIRE 1184 176 976 176
WIRE 1296 176 1296 128
WIRE 1296 176 1264 176
WIRE -624 192 -976 192
WIRE 976 192 976 176
WIRE -624 208 -624 192
WIRE -656 224 -864 224
WIRE 176 240 176 112
WIRE 176 240 -592 240
WIRE -656 256 -752 256
WIRE 1296 256 1296 176
WIRE 1328 256 1296 256
WIRE -976 272 -976 192
WIRE -864 272 -864 224
WIRE -752 272 -752 256
WIRE 1472 272 1392 272
WIRE 1632 272 1472 272
WIRE 1808 272 1712 272
WIRE -80 288 -80 176
WIRE 16 288 16 160
WIRE 16 288 -80 288
WIRE 304 288 304 208
WIRE 304 288 16 288
WIRE 464 288 464 160
WIRE 464 288 304 288
WIRE 608 288 608 176
WIRE 608 288 464 288
WIRE 976 288 976 272
WIRE 976 288 608 288
WIRE 1184 288 976 288
WIRE 1296 288 1264 288
WIRE 1328 288 1296 288
WIRE -624 320 -624 272
WIRE 224 320 224 64
WIRE 224 320 -624 320
WIRE 1296 384 1296 288
WIRE 1328 384 1296 384
WIRE 1472 384 1472 272
WIRE 1472 384 1408 384
FLAG -80 288 0
FLAG -752 352 0
FLAG -976 352 0
FLAG -864 352 0
FLAG 1280 -144 0
FLAG 1280 -224 A
IOPIN 1280 -224 Out
FLAG 1296 48 0
FLAG 1360 304 A
IOPIN 1360 304 In
FLAG 1360 240 0
FLAG 1808 272 0
SYMBOL voltage -80 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL cap 448 96 R0
SYMATTR InstName C2
SYMATTR Value 18.95µ
SYMBOL res 592 80 R0
SYMATTR InstName R1
SYMATTR Value 12
SYMBOL ind 336 80 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 5.34m
SYMBOL cap 0 96 R0
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL nmos 96 112 R270
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL voltage -976 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 30
SYMBOL voltage -864 256 R0
WINDOW 0 -25 132 Left 2
WINDOW 3 -5 265 Left 2
SYMATTR InstName SAW
SYMATTR Value PWL REPEAT FOREVER (0 0 66.667u 24 66.668u 0) ENDREPEAT
SYMBOL OpAmps\\UniversalOpAmp2 -624 240 R0
SYMATTR InstName U2
SYMBOL voltage -752 256 R0
WINDOW 3 -7 135 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PWL REPEAT FOREVER (0 6 1m 18 10m 18 11m 6 20m 6) ENDREPEAT
SYMATTR InstName V2
SYMBOL res 960 48 R0
SYMATTR InstName R2
SYMATTR Value 3k
SYMBOL res 960 176 R0
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL voltage 1280 -240 R0
SYMATTR InstName V3
SYMATTR Value 30V
SYMBOL res 1424 400 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL res 1280 304 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res 1280 192 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL res 1312 32 M0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL OpAmps\\UniversalOpAmp 1360 272 M180
SYMATTR InstName U1
SYMBOL res 1728 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100
SYMBOL diode 320 208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
TEXT -112 328 Left 2 !.tran 120m
TEXT 544 336 Left 2 !.param duty=0.513 fs=5k
RECTANGLE Normal -192 480 736 -96 2
RECTANGLE Normal 1040 480 848 -96 2
RECTANGLE Normal 1568 496 1120 -96 2
